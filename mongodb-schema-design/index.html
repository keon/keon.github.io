<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Rules of Thumb for MongoDB Schema Design · Keon's Blog</title><meta name="description" content="Rules of Thumb for MongoDB Schema Design - Keon Kim"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://keon.io/atom.xml" title="Keon's Blog"><meta name="generator" content="Hexo 4.2.0"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/keon" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Rules of Thumb for MongoDB Schema Design</h1><div class="post-info">Jan 11, 2017</div><div class="post-content"><p>This is a summary of <a href="https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-1" target="_blank" rel="external">6 Rules of Thumb for MongoDB Schema Design</a>, which details how should MongoDB schemas should be organized in three separate blogs posts. So please take a look if this summarization is not sufficient.<br><a id="more"></a><br>If you are new to MongoDB it is natural to ask how should one structure the schema for One-to-Many relationship.</p>
<h2 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h2><p>Relationships can be in three different forms.</p>
<ul>
<li>One-to-Few</li>
<li>One-to-Many</li>
<li>One-to-Squillions</li>
</ul>
<p>Each methods for structuring has its pros and cons. So the user should know how to decide which one is better than the other in the given situation.</p>
<h2 id="One-to-Few"><a href="#One-to-Few" class="headerlink" title="One-to-Few"></a>One-to-Few</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// person</span></div><div class="line">&#123;</div><div class="line">  name: <span class="string">"Keon Kim"</span>,</div><div class="line">  hometown: <span class="string">"Seoul"</span>,</div><div class="line">  addresses: [</div><div class="line">    &#123; <span class="attr">city</span>: <span class="string">'Manhattan'</span>, <span class="attr">state</span>: <span class="string">'NY'</span>, <span class="attr">cc</span>: <span class="string">'USA'</span> &#125;,</div><div class="line">    &#123; <span class="attr">city</span>: <span class="string">'Jersey City'</span>, <span class="attr">state</span>: <span class="string">'NJ'</span>, <span class="attr">cc</span>: <span class="string">'USA'</span> &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>Pros</strong></p>
<ul>
<li>You can call all the information in one query</li>
</ul>
<p><strong>Cons</strong></p>
<ul>
<li>It is impossible to search the contained entity independently.</li>
</ul>
<h2 id="One-to-Many"><a href="#One-to-Many" class="headerlink" title="One-to-Many"></a>One-to-Many</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// parts</span></div><div class="line">&#123;</div><div class="line">  _id: ObjectID(<span class="string">'AAAA'</span>),</div><div class="line">  partno: <span class="string">'123-aff-456'</span>,</div><div class="line">  name: <span class="string">'Awesometel 100Ghz CPU'</span>,</div><div class="line">  qty: <span class="number">102</span>,</div><div class="line">  cost: <span class="number">1.21</span>,</div><div class="line">  price: <span class="number">3.99</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// products</span></div><div class="line">&#123;</div><div class="line">  name: <span class="string">'Weird Computer WC-3020'</span>,</div><div class="line">  manufacturer: <span class="string">'Haruair Eng.'</span>,</div><div class="line">  catalog_number: <span class="number">1234</span>,</div><div class="line">  parts: [</div><div class="line">    ObjectID(<span class="string">'AAAA'</span>),</div><div class="line">    ObjectID(<span class="string">'DEFO'</span>),</div><div class="line">    ObjectID(<span class="string">'EJFW'</span>)</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Parent holds the list of ObjectID of the child documents. This requires an application level join, not the database level join.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// find product based on category_number.</span></div><div class="line">&gt; product = db.products.findOne(&#123;<span class="attr">catalog_number</span>: <span class="number">1234</span>&#125;);</div><div class="line"><span class="comment">// find all parts in the product's parts list.</span></div><div class="line">&gt; product_parts = db.parts.find(&#123;</div><div class="line">                      _id: &#123; <span class="attr">$in</span> : product.parts &#125; </div><div class="line">                  &#125;).toArray() ;</div></pre></td></tr></table></figure>
<p><strong>Pros</strong></p>
<ul>
<li>It is easy to handle insert, delete on each documents independently.</li>
<li>It has flexibility for implementing N-to-N relationship because it is an application level join.</li>
</ul>
<p><strong>Cons</strong></p>
<ul>
<li>Performance drops as you call documents multiple times.</li>
</ul>
<h2 id="One-to-Squillions"><a href="#One-to-Squillions" class="headerlink" title="One-to-Squillions"></a>One-to-Squillions</h2><p>If you need to store tons of data (ie. event logs), you need to use a different approach since a document cannot be larger than 16MB in size. You need to use ‘parent-referencing’.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// host</span></div><div class="line">&#123;</div><div class="line">  _id : ObjectID(<span class="string">'AAAB'</span>),</div><div class="line">  name : <span class="string">'goofy.example.com'</span>,</div><div class="line">  ipaddr : <span class="string">'127.66.66.66'</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// logmsg</span></div><div class="line">&#123;</div><div class="line">  time : ISODate(<span class="string">"2015-09-02T09:10:09.032Z"</span>),</div><div class="line">  message : <span class="string">'cpu is on fire!'</span>,</div><div class="line">  host: ObjectID(<span class="string">'AAAB'</span>)       <span class="comment">// references Host document</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Later you can join like below.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Search parent host document</span></div><div class="line">&gt; host = db.hosts.findOne(&#123;<span class="attr">ipaddr</span> : <span class="string">'127.66.66.66'</span>&#125;);</div><div class="line"><span class="comment">// Search the most recent 5000 logs</span></div><div class="line"><span class="comment">// for a host based on host's ObjectID</span></div><div class="line">&gt; last_5k_msg = db.logmsg.find(&#123;<span class="attr">host</span>: host._id&#125;)</div><div class="line">                         .sort(&#123;<span class="attr">time</span> : <span class="number">-1</span>&#125;)</div><div class="line">                         .limit(<span class="number">5000</span>)</div><div class="line">                         .toArray()</div></pre></td></tr></table></figure>
<h2 id="Two-Way-Referencing"><a href="#Two-Way-Referencing" class="headerlink" title="Two-Way Referencing"></a>Two-Way Referencing</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// person</span></div><div class="line">&#123;</div><div class="line">  _id: ObjectID(<span class="string">"AAF1"</span>),</div><div class="line">  name: <span class="string">"Koala"</span>,</div><div class="line">  tasks [ <span class="comment">// reference task document</span></div><div class="line">    ObjectID(<span class="string">"ADF9"</span>),</div><div class="line">    ObjectID(<span class="string">"AE02"</span>),</div><div class="line">    ObjectID(<span class="string">"AE73"</span>)</div><div class="line">  ]</div><div class="line">&#125;</div><div class="line"><span class="comment">// tasks</span></div><div class="line">&#123;</div><div class="line">  _id: ObjectID(<span class="string">"ADF9"</span>),</div><div class="line">  description: <span class="string">"Practice Jiu-jitsu"</span>,</div><div class="line">  due_date:  ISODate(<span class="string">"2015-10-01"</span>),</div><div class="line">  owner: ObjectID(<span class="string">"AAF1"</span>) <span class="comment">// reference person document</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>We put references on bot sides in order to find the opposite document in one-to-many relationship.</p>
<p><strong>Pros</strong></p>
<ul>
<li>It is easy to search on both Person and Task documents</li>
</ul>
<p><strong>Cons</strong></p>
<ul>
<li>It requires two separate queries to update an item. The update is not atomic.</li>
</ul>
<h2 id="Many-to-One-Denormalization"><a href="#Many-to-One-Denormalization" class="headerlink" title="Many-to-One Denormalization"></a>Many-to-One Denormalization</h2><p>We can structure the schema like below to avoid making multiple queries.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// products - before</span></div><div class="line">&#123;</div><div class="line">  name: <span class="string">'Weird Computer WC-3020'</span>,</div><div class="line">  manufacturer: <span class="string">'Haruair Eng.'</span>,</div><div class="line">  catalog_number: <span class="number">1234</span>,</div><div class="line">  parts: [</div><div class="line">    ObjectID(<span class="string">'AAAA'</span>),</div><div class="line">    ObjectID(<span class="string">'DEFO'</span>),</div><div class="line">    ObjectID(<span class="string">'EJFW'</span>)</div><div class="line">  ]</div><div class="line">&#125;</div><div class="line"><span class="comment">// products - after</span></div><div class="line">&#123;</div><div class="line">  name: <span class="string">'Weird Computer WC-3020'</span>,</div><div class="line">  manufacturer: <span class="string">'Haruair Eng.'</span>,</div><div class="line">  catalog_number: <span class="number">1234</span>,</div><div class="line">  parts: [ <span class="comment">// denormalization</span></div><div class="line">    &#123; <span class="attr">id</span>: ObjectID(<span class="string">'AAAA'</span>), <span class="attr">name</span>: <span class="string">'Awesometel 100Ghz CPU'</span> &#125;,</div><div class="line">    &#123; <span class="attr">id</span>: ObjectID(<span class="string">'DEFO'</span>), <span class="attr">name</span>: <span class="string">'AwesomeSize 100TB SSD'</span> &#125;,</div><div class="line">    &#123; <span class="attr">id</span>: ObjectID(<span class="string">'EJFW'</span>), <span class="attr">name</span>: <span class="string">'Magical Mouse'</span> &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>You can use it like below in the application level:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// search product document</span></div><div class="line">&gt; product = db.products.findOne(&#123;<span class="attr">catalog_number</span>: <span class="number">1234</span>&#125;);</div><div class="line"><span class="comment">// make a list of part id using map() function</span></div><div class="line"><span class="comment">// from the list of ObjectIDs</span></div><div class="line">&gt; part_ids = product.parts.map( <span class="function"><span class="keyword">function</span>(<span class="params">doc</span>) </span>&#123; <span class="keyword">return</span> doc.id &#125; );</div><div class="line"><span class="comment">// search all parts related to the product</span></div><div class="line">&gt; product_parts = db.parts.find(&#123;<span class="attr">_id</span>: &#123; <span class="attr">$in</span> : part_ids &#125; &#125; )</div><div class="line">                          .toArray();</div></pre></td></tr></table></figure>
<p><strong>Pros</strong></p>
<ul>
<li>Denormalization reduces the cost of calling the data. </li>
</ul>
<p><strong>Cons</strong></p>
<ul>
<li>When you want to update the part name, you have to update all names contained inside product document</li>
<li>It is not a good choice when updates are frequent</li>
</ul>
<p>This form of denormalization is favorable when there is no frequent updates and squillion reads.</p>
<h2 id="One-to-Many-Denormalization"><a href="#One-to-Many-Denormalization" class="headerlink" title="One-to-Many Denormalization"></a>One-to-Many Denormalization</h2><p>Unlike the previous example, we can denormalize in the opposite way. The same pros and cons apply.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// parts - before</span></div><div class="line">&#123;</div><div class="line">  _id: ObjectID(<span class="string">'AAAA'</span>),</div><div class="line">  partno: <span class="string">'123-aff-456'</span>,</div><div class="line">  name: <span class="string">'Awesometel 100Ghz CPU'</span>,</div><div class="line">  qty: <span class="number">102</span>,</div><div class="line">  cost: <span class="number">1.21</span>,</div><div class="line">  price: <span class="number">3.99</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// parts - after</span></div><div class="line">&#123;</div><div class="line">  _id: ObjectID(<span class="string">'AAAA'</span>),</div><div class="line">  partno: <span class="string">'123-aff-456'</span>,</div><div class="line">  name: <span class="string">'Awesometel 100Ghz CPU'</span>,</div><div class="line">  product_name: <span class="string">'Weird Computer WC-3020'</span>, <span class="comment">// denormalization</span></div><div class="line">  product_catalog_number: <span class="number">1234</span>,           <span class="comment">// denormalization</span></div><div class="line">  qty: <span class="number">102</span>,</div><div class="line">  cost: <span class="number">1.21</span>,</div><div class="line">  price: <span class="number">3.99</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="One-to-Squillions-Denormalization"><a href="#One-to-Squillions-Denormalization" class="headerlink" title="One-to-Squillions Denormalization"></a>One-to-Squillions Denormalization</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// logmsg - before</span></div><div class="line">&#123;</div><div class="line">  time : ISODate(<span class="string">"2015-09-02T09:10:09.032Z"</span>),</div><div class="line">  message : <span class="string">'cpu is on fire!'</span>,</div><div class="line">  host: ObjectID(<span class="string">'AAAB'</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// logmsg - after</span></div><div class="line">&#123;</div><div class="line">  time : ISODate(<span class="string">"2015-09-02T09:10:09.032Z"</span>),</div><div class="line">  message : <span class="string">'cpu is on fire!'</span>,</div><div class="line">  host: ObjectID(<span class="string">'AAAB'</span>),</div><div class="line">  ipaddr : <span class="string">'127.66.66.66'</span></div><div class="line">&#125;</div><div class="line">&gt; last_5k_msg = db.logmsg.find(&#123;<span class="attr">ipaddr</span> : <span class="string">'127.66.66.66'</span>&#125;)</div><div class="line">                         .sort(&#123;<span class="attr">time</span> : <span class="number">-1</span>&#125;)</div><div class="line">                         .limit(<span class="number">5000</span>)</div><div class="line">                         .toArray()</div></pre></td></tr></table></figure>
<p>In fact, you can merge the two documents.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    time : ISODate(<span class="string">"2015-09-02T09:10:09.032Z"</span>),</div><div class="line">    message : <span class="string">'cpu is on fire!'</span>,</div><div class="line">    ipaddr : <span class="string">'127.66.66.66'</span>,</div><div class="line">    hostname : <span class="string">'goofy.example.com'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>It would be used like this in the code.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// receive log from monitoring program.</span></div><div class="line">logmsg = get_log_msg();</div><div class="line">log_message_here = logmsg.msg;</div><div class="line">log_ip = logmsg.ipaddr;</div><div class="line"><span class="comment">// get timestamp</span></div><div class="line">now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// find host's id for update</span></div><div class="line">host_doc = db.hosts.findOne(&#123; <span class="attr">ipaddr</span>: log_ip &#125;,&#123; <span class="attr">_id</span>: <span class="number">1</span> &#125;);</div><div class="line">host_id = host_doc._id;</div><div class="line"><span class="comment">// save denoramlized data</span></div><div class="line">db.logmsg.save(&#123;</div><div class="line">    time : now,</div><div class="line">    message : log_message_here,</div><div class="line">    ipaddr : log_ip,</div><div class="line">    host : host_id ) &#125;);</div><div class="line"><span class="comment">// Push the denoramlized data in 'one'</span></div><div class="line">db.hosts.update( &#123;<span class="attr">_id</span>: host_id &#125;, &#123;</div><div class="line">    $push : &#123;</div><div class="line">      logmsgs : &#123;</div><div class="line">        $each:  [ &#123; <span class="attr">time</span> : now, <span class="attr">message</span> : log_message_here &#125; ],</div><div class="line">        $sort:  &#123; <span class="attr">time</span> : <span class="number">1</span> &#125;,  <span class="comment">// sort by time</span></div><div class="line">        $slice: <span class="number">-1000</span>          <span class="comment">// get top 1000</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<h2 id="6-Rules-of-Thumb"><a href="#6-Rules-of-Thumb" class="headerlink" title="6 Rules of Thumb"></a>6 Rules of Thumb</h2><p>Here are some “rules of thumb” to guide you through these indenumberable (but not infinite) choices</p>
<ol>
<li><p>favor embedding unless there is a compelling reason not to</p>
</li>
<li><p>needing to access an object on its own is a compelling reason not to embed it</p>
</li>
<li><p>Arrays should not grow without bound. If there are more than a couple of hundred documents on the “many” side, don’t embed them; if there are more than a few thousand documents on the “many” side, don’t use an array of ObjectID references. High-cardinality arrays are a compelling reason not to embed.</p>
</li>
<li><p>Don’t be afraid of application-level joins: if you index correctly and use the projection specifier then application-level joins are barely more expensive than server-side joins in a relational database.</p>
</li>
<li><p>Consider the write/read ratio when denormalizing. A field that will mostly be read and only seldom updated is a good candidate for denormalization: if you denormalize a field that is updated frequently then the extra work of finding and updating all the instances is likely to overwhelm the savings that you get from denormalizing.</p>
</li>
<li><p>As always with MongoDB, how you model your data depends – entirely – on your particular application’s data access patterns. You want to structure your data to match the ways that your application queries and updates it.</p>
</li>
</ol>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li><a href="https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-1" target="_blank" rel="external">6 Rules of Thumb for MongoDB Schema Design Part 1</a>, <a href="https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-2" target="_blank" rel="external">Part 2</a>, <a href="https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-3" target="_blank" rel="external">Part 3</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/deep-q-learning/" class="prev">PREV</a><a href="/mlpack-on-windows/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = "keonblog";
var disqus_identifier = "mongodb-schema-design/";
var disqus_title = "Rules of Thumb for MongoDB Schema Design";
var disqus_url = "http://keon.io/mongodb-schema-design/";
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//keonblog.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 - 2019 <a href="http://keon.io">Keon Kim</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65209371-1",'auto');ga('send','pageview');</script></body></html>