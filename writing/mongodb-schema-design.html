<!DOCTYPE html><!--LN3xQXVA8Q64WAedwU1wd--><html lang="en" class="__variable_f910ec"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/5b01f339abf2f1a5.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/4b6f991c45bff492.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-d2588bc1256117b5.js"/><script src="/_next/static/chunks/72d9b9fe-881c608dfd3d6075.js" async=""></script><script src="/_next/static/chunks/59-ac558f0723878dde.js" async=""></script><script src="/_next/static/chunks/main-app-d66eab3dea226dfc.js" async=""></script><script src="/_next/static/chunks/205-e96f68d7203b15f6.js" async=""></script><script src="/_next/static/chunks/app/layout-7515811826800637.js" async=""></script><script src="/_next/static/chunks/194-a3fce70a81ebfe46.js" async=""></script><script src="/_next/static/chunks/app/%5BcontentType%5D/%5Bslug%5D/page-d8e2278941ac5d63.js" async=""></script><title>Keon Kim</title><meta name="description" content="Keon&#x27;s blog."/><link rel="manifest" href="/favicon/site.webmanifest"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><meta property="og:title" content="Keon Kim"/><meta property="og:description" content="Keon&#x27;s blog."/><meta property="og:url" content="https://portfolio-blog-starter.vercel.app"/><meta property="og:site_name" content="Keon Kim"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Keon Kim"/><meta name="twitter:description" content="Keon&#x27;s blog."/><link rel="icon" href="/favicon/favicon-16x16.png" sizes="16x16" type="image/png"/><link rel="icon" href="/favicon/favicon-32x32.png" sizes="32x32" type="image/png"/><link rel="icon" href="/favicon/favicon.ico" sizes="any"/><link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png" sizes="180x180" type="image/png"/><link rel="android-chrome-192x192" href="/favicon/android-chrome-192x192.png"/><link rel="android-chrome-512x512" href="/favicon/android-chrome-512x512.png"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="font-mono antialiased max-w-2xl mx-4 mt-6 lg:mx-auto text-sm text-black bg-white dark:text-white dark:bg-black"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","system",null,["light","dark"],null,true,true)</script><main class="flex-auto min-w-0 mt-4 flex flex-col px-2 md:px-0"><aside class="-ml-[8px] mb-8 tracking-tight"><div class="lg:sticky lg:top-20"><nav class="flex flex-row items-center justify-between relative px-0 pb-0 fade md:overflow-auto scroll-pr-6 md:relative" id="nav"><div class="flex flex-row space-x-0 pr-10"><a class="transition-all hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black flex align-middle relative py-1 px-2 m-1" href="/">home</a><a class="transition-all hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black flex align-middle relative py-1 px-2 m-1" href="/writing">writing</a></div></nav></div></aside><section><h1 class="title font-bold text-lg">Rules of Thumb for MongoDB Schema Design</h1><div class="flex justify-between items-center mt-1 mb-6 text-xs"><span class="relative group cursor-default inline-flex items-center"><span class="absolute bottom-full left-0 mb-1 px-2 py-1 text-[10px] bg-black text-white dark:bg-white dark:text-black invisible group-hover:visible transition-all pointer-events-none whitespace-nowrap">Jan 11, 2017, 24:00<br/>Jan 11, 2017, 24:00<!-- --> GMT</span></span></div><article class="prose"><p>This is a summary of <a target="_blank" rel="noopener noreferrer" href="https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-1">6 Rules of Thumb for MongoDB Schema Design</a>, which details how MongoDB schemas should be organized in three separate blog posts. So please take a look if this summarization is not sufficient.</p>
<p>If you are new to MongoDB it is natural to ask how should one structure the schema for One-to-Many relationship.</p>
<h2 id="basics"><a href="#basics" class="anchor"></a>Basics</h2>
<p>Relationships can be in three different forms:</p>
<ul>
<li>One-to-Few</li>
<li>One-to-Many</li>
<li>One-to-Squillions</li>
</ul>
<p>Each method for structuring has its pros and cons. So the user should know how to decide which one is better than the other in the given situation.</p>
<h2 id="one-to-few"><a href="#one-to-few" class="anchor"></a>One-to-Few</h2>
<pre><code class="language-javascript"><span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// person</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">name</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--string" style="color:var(--sh-string)">Keon Kim</span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">hometown</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--string" style="color:var(--sh-string)">Seoul</span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">addresses</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">[</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">city</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">Manhattan</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">state</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">NY</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">cc</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">USA</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">city</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">Jersey City</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">state</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">NJ</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">cc</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">USA</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--sign" style="color:var(--sh-sign)">]</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span></code></pre>
<p><strong>Pros</strong></p>
<ul>
<li>You can call all the information in one query</li>
</ul>
<p><strong>Cons</strong></p>
<ul>
<li>It is impossible to search the contained entity independently.</li>
</ul>
<h2 id="one-to-many"><a href="#one-to-many" class="anchor"></a>One-to-Many</h2>
<pre><code class="language-javascript"><span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// parts</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--class" style="color:var(--sh-class)">_id</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">ObjectID</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">AAAA</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">partno</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">123-aff-456</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">name</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">Awesometel 100Ghz CPU</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">qty</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">102</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">cost</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">1</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--class" style="color:var(--sh-class)">21</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">price</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">3</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--class" style="color:var(--sh-class)">99</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// products</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">name</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">Weird Computer WC-3020</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">manufacturer</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">Haruair Eng.</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">catalog_number</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">1234</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">parts</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">[</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--class" style="color:var(--sh-class)">ObjectID</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">AAAA</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--class" style="color:var(--sh-class)">ObjectID</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">DEFO</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--class" style="color:var(--sh-class)">ObjectID</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">EJFW</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--sign" style="color:var(--sh-sign)">]</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span></code></pre>
<p>Parent holds the list of ObjectID of the child documents. This requires an application level join, not the database level join.</p>
<pre><code class="language-javascript"><span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// find product based on category_number.</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">&gt;</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">product</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">db</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">products</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">findOne</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">catalog_number</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">1234</span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// find all parts in the product&#039;s parts list.</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">&gt;</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">product_parts</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">db</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">parts</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">find</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">                      </span><span class="sh__token--class" style="color:var(--sh-class)">_id</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--string" style="color:var(--sh-string)"> $</span><span class="sh__token--keyword" style="color:var(--sh-keyword)">in</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">product</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">parts</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">                   </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">toArray</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span></code></pre>
<p><strong>Pros</strong></p>
<ul>
<li>It is easy to handle insert, delete on each documents independently.</li>
<li>It has flexibility for implementing N-to-N relationship because it is an application level join.</li>
</ul>
<p><strong>Cons</strong></p>
<ul>
<li>Performance drops as you call documents multiple times.</li>
</ul>
<h2 id="one-to-squillions"><a href="#one-to-squillions" class="anchor"></a>One-to-Squillions</h2>
<p>If you need to store tons of data (ie. event logs), you need to use a different approach since a document cannot be larger than 16MB in size. You need to use &#x27;parent-referencing&#x27;.</p>
<pre><code class="language-javascript"><span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// host</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--class" style="color:var(--sh-class)">_id</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">ObjectID</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">AAAB</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">name</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">goofy.example.com</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">ipaddr</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">127.66.66.66</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// logmsg</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">time</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">ISODate</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--string" style="color:var(--sh-string)">2015-09-02T09:10:09.032Z</span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">message</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">cpu is on fire!</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">ObjectID</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">AAAB</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--space" style="color:var(--sh-space)">      </span><span class="sh__token--comment" style="color:var(--sh-comment)">// references Host document</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span></code></pre>
<p>Later you can join like below:</p>
<pre><code class="language-javascript"><span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// Search parent host document</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">&gt;</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">db</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">hosts</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">findOne</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">ipaddr</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">127.66.66.66</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// Search the most recent 5000 logs</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--comment" style="color:var(--sh-comment)">// for a host based on host&#039;s ObjectID</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">&gt;</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">last_5k_msg</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">db</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">logmsg</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">find</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--class" style="color:var(--sh-class)">_id</span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">                         </span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">sort</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">time</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">-</span><span class="sh__token--class" style="color:var(--sh-class)">1</span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">                         </span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">limit</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--class" style="color:var(--sh-class)">5000</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">                         </span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">toArray</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span></code></pre>
<h2 id="denormalization"><a href="#denormalization" class="anchor"></a>Denormalization</h2>
<p>In order to speed up the query, you can denormalize the data.</p>
<pre><code class="language-javascript"><span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// logmsg - before</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">time</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">ISODate</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--string" style="color:var(--sh-string)">2015-09-02T09:10:09.032Z</span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">message</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">cpu is on fire!</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">ObjectID</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">AAAB</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// logmsg - after</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">time</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">ISODate</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--string" style="color:var(--sh-string)">2015-09-02T09:10:09.032Z</span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">message</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">cpu is on fire!</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">ObjectID</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">AAAB</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">ipaddr</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">127.66.66.66</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span></code></pre>
<pre><code class="language-javascript"><span class="sh__line"><span class="sh__token--sign" style="color:var(--sh-sign)">&gt;</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">last_5k_msg</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">db</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">logmsg</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">find</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">ipaddr</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">127.66.66.66</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">                         </span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">sort</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">time</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">-</span><span class="sh__token--class" style="color:var(--sh-class)">1</span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">                         </span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">limit</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--class" style="color:var(--sh-class)">5000</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">                         </span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">toArray</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span></code></pre>
<p>In fact, you can merge the two documents:</p>
<pre><code class="language-javascript"><span class="sh__line"><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">time</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">ISODate</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--string" style="color:var(--sh-string)">2015-09-02T09:10:09.032Z</span><span class="sh__token--string" style="color:var(--sh-string)">&quot;</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">message</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">cpu is on fire!</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">ipaddr</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">127.66.66.66</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">hostname</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--string" style="color:var(--sh-string)">goofy.example.com</span><span class="sh__token--string" style="color:var(--sh-string)">&#039;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span></code></pre>
<p>It would be used like this in the code:</p>
<pre><code class="language-javascript"><span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// receive log from monitoring program.</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--identifier" style="color:var(--sh-identifier)">logmsg</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">get_log_msg</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--identifier" style="color:var(--sh-identifier)">log_message_here</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">logmsg</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">msg</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--identifier" style="color:var(--sh-identifier)">log_ip</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">logmsg</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">ipaddr</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// get timestamp</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--identifier" style="color:var(--sh-identifier)">now</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--keyword" style="color:var(--sh-keyword)">new</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">Date</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// find host&#039;s id for update</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host_doc</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">db</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">hosts</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">findOne</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">ipaddr</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">log_ip</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">_id</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">1</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--identifier" style="color:var(--sh-identifier)">host_id</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">=</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host_doc</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--class" style="color:var(--sh-class)">_id</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// save denoramlized data</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--identifier" style="color:var(--sh-identifier)">db</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">logmsg</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">save</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">time</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">now</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">message</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">log_message_here</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">ipaddr</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">log_ip</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host_id</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)">// Push the denoramlized data in &#039;one&#039;</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--identifier" style="color:var(--sh-identifier)">db</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">hosts</span><span class="sh__token--sign" style="color:var(--sh-sign)">.</span><span class="sh__token--property" style="color:var(--sh-property)">update</span><span class="sh__token--sign" style="color:var(--sh-sign)">(</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--class" style="color:var(--sh-class)">_id</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">host_id</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--string" style="color:var(--sh-string)">    $</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">push</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">      </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">logmsgs</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--string" style="color:var(--sh-string)">        $</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">each</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">[</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">time</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">now</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">message</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">log_message_here</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">]</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--string" style="color:var(--sh-string)">        $</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">sort</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">{</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--identifier" style="color:var(--sh-identifier)">time</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--class" style="color:var(--sh-class)">1</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">,</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--comment" style="color:var(--sh-comment)">// sort by time</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--string" style="color:var(--sh-string)">        $</span><span class="sh__token--identifier" style="color:var(--sh-identifier)">slice</span><span class="sh__token--sign" style="color:var(--sh-sign)">:</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--sign" style="color:var(--sh-sign)">-</span><span class="sh__token--class" style="color:var(--sh-class)">1000</span><span class="sh__token--space" style="color:var(--sh-space)"> </span><span class="sh__token--space" style="color:var(--sh-space)">         </span><span class="sh__token--comment" style="color:var(--sh-comment)">// get top 1000</span></span>
<span class="sh__line"><span class="sh__token--comment" style="color:var(--sh-comment)"></span><span class="sh__token--space" style="color:var(--sh-space)">      </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">    </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span>
<span class="sh__line"><span class="sh__token--space" style="color:var(--sh-space)">  </span><span class="sh__token--sign" style="color:var(--sh-sign)">}</span><span class="sh__token--sign" style="color:var(--sh-sign)">)</span><span class="sh__token--sign" style="color:var(--sh-sign)">;</span><span class="sh__token--break" style="color:var(--sh-break)"></span></span></code></pre>
<h2 id="6-rules-of-thumb"><a href="#6-rules-of-thumb" class="anchor"></a>6 Rules of Thumb</h2>
<p>Here are some &quot;rules of thumb&quot; to guide you through these innumerable (but not infinite) choices:</p>
<ol>
<li>Favor embedding unless there is a compelling reason not to</li>
<li>Needing to access an object on its own is a compelling reason not to embed it</li>
<li>Arrays should not grow without bound. If there are more than a couple of hundred documents on the &quot;many&quot; side, don&#x27;t embed them; if there are more than a few thousand documents on the &quot;many&quot; side, don&#x27;t use an array of ObjectID references. High-cardinality arrays are a compelling reason not to embed.</li>
<li>Don&#x27;t be afraid of application-level joins: if you index correctly and use the projection specifier then application-level joins are barely more expensive than server-side joins in a relational database.</li>
<li>Consider the write/read ratio when denormalizing. A field that will mostly be read and only seldom updated is a good candidate for denormalization: if you denormalize a field that is updated frequently then the extra work of finding and updating all the instances is likely to overwhelm the savings that you get from denormalizing.</li>
<li>As always with MongoDB, how you model your data depends  entirely  on your particular application&#x27;s data access patterns. You want to structure your data to match the ways that your application queries and updates it.</li>
</ol>
<h2 id="references"><a href="#references" class="anchor"></a>References</h2>
<ul>
<li><a target="_blank" rel="noopener noreferrer" href="https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-1">6 Rules of Thumb for MongoDB Schema Design Part 1</a></li>
<li><a target="_blank" rel="noopener noreferrer" href="https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-2">6 Rules of Thumb for MongoDB Schema Design Part 2</a></li>
<li><a target="_blank" rel="noopener noreferrer" href="https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-3">6 Rules of Thumb for MongoDB Schema Design Part 3</a></li>
</ul></article></section><!--$--><!--/$--><footer class="mb-4 mt-12"><div class="text-xs opacity-50"><a class="hover:opacity-100 transition-opacity mr-3" rel="noopener noreferrer" target="_blank" href="/rss">rss</a><a class="hover:opacity-100 transition-opacity mr-3" rel="noopener noreferrer" target="_blank" href="https://github.com/keon">github</a><a class="hover:opacity-100 transition-opacity mr-3" rel="noopener noreferrer" target="_blank" href="https://www.linkedin.com/in/keon/">linkedin</a><a class="hover:opacity-100 transition-opacity" rel="noopener noreferrer" target="_blank" href="https://x.com/keonwkim">x</a></div></footer><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></main><script src="/_next/static/chunks/webpack-d2588bc1256117b5.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[4773,[\"205\",\"static/chunks/205-e96f68d7203b15f6.js\",\"177\",\"static/chunks/app/layout-7515811826800637.js\"],\"ThemeProvider\"]\n3:I[9586,[\"205\",\"static/chunks/205-e96f68d7203b15f6.js\",\"194\",\"static/chunks/194-a3fce70a81ebfe46.js\",\"980\",\"static/chunks/app/%5BcontentType%5D/%5Bslug%5D/page-d8e2278941ac5d63.js\"],\"\"]\n4:I[5758,[\"205\",\"static/chunks/205-e96f68d7203b15f6.js\",\"177\",\"static/chunks/app/layout-7515811826800637.js\"],\"ThemeToggle\"]\n5:I[4308,[],\"\"]\n6:I[834,[],\"\"]\n7:I[8641,[\"205\",\"static/chunks/205-e96f68d7203b15f6.js\",\"177\",\"static/chunks/app/layout-7515811826800637.js\"],\"Analytics\"]\n8:I[6794,[\"205\",\"static/chunks/205-e96f68d7203b15f6.js\",\"177\",\"static/chunks/app/layout-7515811826800637.js\"],\"SpeedInsights\"]\na:I[7921,[],\"OutletBoundary\"]\nc:I[2140,[],\"AsyncMetadataOutlet\"]\ne:I[7921,[],\"ViewportBoundary\"]\n10:I[7921,[],\"MetadataBoundary\"]\n11:\"$Sreact.suspense\"\n13:I[9216,[],\"\"]\n:HL[\"/_next/static/media/5b01f339abf2f1a5.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/4b6f991c45bff492.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"LN3xQXVA8Q64WAedwU1wd\",\"p\":\"\",\"c\":[\"\",\"writing\",\"mongodb-schema-design\"],\"i\":false,\"f\":[[[\"\",{\"children\":[[\"contentType\",\"writing\",\"d\"],{\"children\":[[\"slug\",\"mongodb-schema-design\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4b6f991c45bff492.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"__variable_f910ec\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"font-mono antialiased max-w-2xl mx-4 mt-6 lg:mx-auto text-sm text-black bg-white dark:text-white dark:bg-black\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"main\",null,{\"className\":\"flex-auto min-w-0 mt-4 flex flex-col px-2 md:px-0\",\"children\":[[\"$\",\"aside\",null,{\"className\":\"-ml-[8px] mb-8 tracking-tight\",\"children\":[\"$\",\"div\",null,{\"className\":\"lg:sticky lg:top-20\",\"children\":[\"$\",\"nav\",null,{\"className\":\"flex flex-row items-center justify-between relative px-0 pb-0 fade md:overflow-auto scroll-pr-6 md:relative\",\"id\":\"nav\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-row space-x-0 pr-10\",\"children\":[[\"$\",\"$L3\",\"/\",{\"href\":\"/\",\"className\":\"transition-all hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black flex align-middle relative py-1 px-2 m-1\",\"children\":\"home\"}],[\"$\",\"$L3\",\"/writing\",{\"href\":\"/writing\",\"className\":\"transition-all hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black flex align-middle relative py-1 px-2 m-1\",\"children\":\"writing\"}]]}],[\"$\",\"$L4\",null,{}]]}]}]}],[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"section\",null,{\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-8 text-2xl font-semibold tracking-tighter\",\"children\":\"404 - Page Not Found\"}],[\"$\",\"p\",null,{\"className\":\"mb-4\",\"children\":\"The page you are looking for does not exist.\"}]]}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"footer\",null,{\"className\":\"mb-4 mt-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"text-xs opacity-50\",\"children\":[[\"$\",\"a\",null,{\"className\":\"hover:opacity-100 transition-opacity mr-3\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"href\":\"/rss\",\"children\":\"rss\"}],[\"$\",\"a\",null,{\"className\":\"hover:opacity-100 transition-opacity mr-3\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"href\":\"https://github.com/keon\",\"children\":\"github\"}],[\"$\",\"a\",null,{\"className\":\"hover:opacity-100 transition-opacity mr-3\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"href\":\"https://www.linkedin.com/in/keon/\",\"children\":\"linkedin\"}],[\"$\",\"a\",null,{\"className\":\"hover:opacity-100 transition-opacity\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"href\":\"https://x.com/keonwkim\",\"children\":\"x\"}]]}]}],[\"$\",\"$L7\",null,{}],[\"$\",\"$L8\",null,{}]]}]}]}]}]]}],{\"children\":[[\"contentType\",\"writing\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"mongodb-schema-design\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L9\",null,[\"$\",\"$La\",null,{\"children\":[\"$Lb\",[\"$\",\"$Lc\",null,{\"promise\":\"$@d\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],null],[\"$\",\"$L10\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$11\",null,{\"fallback\":null,\"children\":\"$L12\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$13\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"14:I[8268,[\"205\",\"static/chunks/205-e96f68d7203b15f6.js\",\"194\",\"static/chunks/194-a3fce70a81ebfe46.js\",\"980\",\"static/chunks/app/%5BcontentType%5D/%5Bslug%5D/page-d8e2278941ac5d63.js\"],\"RelativeTime\"]\n9:[\"$\",\"section\",null,{\"children\":[[\"$\",\"h1\",null,{\"className\":\"title font-bold text-lg\",\"children\":\"Rules of Thumb for MongoDB Schema Design\"}],[\"$\",\"div\",null,{\"className\":\"flex justify-between items-center mt-1 mb-6 text-xs\",\"children\":[\"$\",\"$L14\",null,{\"date\":\"2017-01-11\"}]}],[\"$\",\"article\",null,{\"className\":\"prose\",\"children\":\"$L15\"}]]}]\n"])</script><script>self.__next_f.push([1,"16:T1a58,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// person\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ename\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eKeon Kim\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehometown\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eSeoul\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eaddresses\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e[\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ecity\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eManhattan\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003estate\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eNY\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ecc\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eUSA\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ecity\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eJersey City\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003estate\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eNJ\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ecc\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eUSA\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e]\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"15:[[\"$\",\"p\",null,{\"children\":[\"This is a summary of \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-1\",\"children\":\"6 Rules of Thumb for MongoDB Schema Design\"}],\", which details how MongoDB schemas should be organized in three separate blog posts. So please take a look if this summarization is not sufficient.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"If you are new to MongoDB it is natural to ask how should one structure the schema for One-to-Many relationship.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"basics\",\"children\":[[[\"$\",\"a\",\"link-basics\",{\"href\":\"#basics\",\"className\":\"anchor\"}]],\"Basics\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Relationships can be in three different forms:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"One-to-Few\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"One-to-Many\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"One-to-Squillions\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Each method for structuring has its pros and cons. So the user should know how to decide which one is better than the other in the given situation.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"one-to-few\",\"children\":[[[\"$\",\"a\",\"link-one-to-few\",{\"href\":\"#one-to-few\",\"className\":\"anchor\"}]],\"One-to-Few\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$16\"},\"className\":\"language-javascript\"}]}],\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\"]\n"])</script><script>self.__next_f.push([1,"17:[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Pros\"}]}]\n18:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"You can call all the information in one query\"}],\"\\n\"]}]\n19:[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Cons\"}]}]\n1a:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"It is impossible to search the contained entity independently.\"}],\"\\n\"]}]\n1b:[\"$\",\"h2\",null,{\"id\":\"one-to-many\",\"children\":[[[\"$\",\"a\",\"link-one-to-many\",{\"href\":\"#one-to-many\",\"className\":\"anchor\"}]],\"One-to-Many\"]}]\n35:T2616,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// parts\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e_id\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eObjectID\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eAAAA\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003epartno\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e123-aff-456\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ename\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eAwesometel 100Ghz CPU\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eqty\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e102\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ecost\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e1\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e21\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eprice\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e3\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e99\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// products\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ename\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eWeird Computer WC-3020\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003emanufacturer\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eHaruair Eng.\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ecatalog_number\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e1234\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eparts\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e[\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eObjectID\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eAAAA\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eObjectID\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eDEFO\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eObjectID\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eEJFW\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e]\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"1c:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$35\"},\"className\":\"language-javascript\"}]}]\n1d:[\"$\",\"p\",null,{\"children\":\"Parent holds the list of ObjectID of the child documents. This requires an application level join, not the database level join.\"}]\n36:T136d,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// find product based on category_number.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eproduct\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003edb\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003eproducts\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003efindOne\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ecatalog_number\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e1234\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// find all parts in the product\u0026#039;s parts list.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eproduct_parts\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003edb\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003eparts\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003efind\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e                      \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e_id\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e $\u003c/span\u003e\u003cspan class=\"sh__token--keyword\" style=\"color:var(--sh-keyword)\"\u003ein\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eproduct\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003eparts\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e                   \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etoArray\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"1e:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$36\"},\"className\":\"language-javascript\"}]}]\n1f:[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Pros\"}]}]\n20:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"It is easy to handle insert, delete on each documents independently.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"It has flexibility for implementing N-to-N relationship because it is an application level join.\"}],\"\\n\"]}]\n21:[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"Cons\"}]}]\n22:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Performance drops as you call documents multiple times.\"}],\"\\n\"]}]\n23:[\"$\",\"h2\",null,{\"id\":\"one-to-squillions\",\"children\":[[[\"$\",\"a\",\"link-one-to-squillions\",{\"href\":\"#one-to-squillions\",\"className\":\"anchor\"}]],\"One-to-Squillions\"]}]\n24:[\"$\",\"p\",null,{\"children\":\"If you need to store tons of data (ie. event logs), you need to use a different approach since a document cannot be larger than 16MB in size. You need to use 'parent-referencing'.\"}]\n37:T18c4,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// host\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e_id\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eObjectID\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eAAAB\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ename\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003egoofy.example.com\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eipaddr\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e127.66.66.66\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// logmsg\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etime\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eISODate\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e2015-09-02T09:10:09.032Z\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003emessage\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003ecpu is on fire!\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eObjectID\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eAAAB\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e      \u003c/span\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// references Host document\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"25:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$37\"},\"className\":\"language-javascript\"}]}]\n26:[\"$\",\"p\",null,{\"children\":\"Later you can join like below:\"}]\n38:T180c,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// Search parent host document\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003edb\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003ehosts\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003efindOne\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eipaddr\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e127.66.66.66\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// Search the most recent 5000 logs\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// for a host based on host\u0026#039;s ObjectID\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elast_5k_msg\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003edb\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003elogmsg\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003efind\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e_id\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e                         \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003esort\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etime\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e-\u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e1\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e                         \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elimit\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e5000\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e                         \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etoArray\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"27:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$38\"},\"className\":\"language-javascript\"}]}]\n28:[\"$\",\"h2\",null,{\"id\":\"denormalization\",\"children\":[[[\"$\",\"a\",\"link-denormalization\",{\"href\":\"#denormalization\",\"className\":\"anchor\"}]],\"Denormalization\"]}]\n29:[\"$\",\"p\",null,{\"children\":\"In order to speed up the query, you can denormalize the data.\"}]\n39:T1b7a,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// logmsg - before\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etime\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eISODate\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e2015-09-02T09:10:09.032Z\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003emessage\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003ecpu is on fire!\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eObjectID\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eAAAB\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// logmsg - after\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etime\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eISODate\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e2015-09-02T09:10:09.032Z\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003emessage\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003ecpu is on fire!\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eObjectID\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003eAAAB\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eipaddr\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e127.66.66.66\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"2a:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$39\"},\"className\":\"language-javascript\"}]}]\n3a:Tea8,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elast_5k_msg\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003edb\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003elogmsg\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003efind\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eipaddr\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e127.66.66.66\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e                         \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003esort\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etime\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e-\u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e1\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e                         \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elimit\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e5000\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e                         \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etoArray\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"2b:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$3a\"},\"className\":\"language-javascript\"}]}]\n2c:[\"$\",\"p\",null,{\"children\":\"In fact, you can merge the two documents:\"}]\n3b:Tdd2,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etime\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eISODate\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e2015-09-02T09:10:09.032Z\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026quot;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003emessage\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003ecpu is on fire!\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eipaddr\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e127.66.66.66\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehostname\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003egoofy.example.com\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e\u0026#039;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"2d:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$3b\"},\"className\":\"language-javascript\"}]}]\n2e:[\"$\",\"p\",null,{\"children\":\"It would be used like this in the code:\"}]\n3c:T45c1,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// receive log from monitoring program.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elogmsg\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eget_log_msg\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elog_message_here\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elogmsg\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elog_ip\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elogmsg\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003eipaddr\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// get timestamp\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003enow\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--keyword\" style=\"color:var(--sh-keyword)\"\u003enew\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003eDate\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// find host\u0026#039;s id for update\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost_doc\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003edb\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003ehosts\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003efindOne\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eipaddr\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elog_ip\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e_id\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e1\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost_id\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e=\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost_doc\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e_id\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// save denoramlized data\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003edb\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003elogmsg\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003esave\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etime\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003enow\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003emessage\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elog_message_here\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eipaddr\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elog_ip\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost_id\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// Push the denoramlized data in \u0026#039;one\u0026#039;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003edb\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003ehosts\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e.\u003c/span\u003e\u003cspan class=\"sh__token--property\" style=\"color:var(--sh-property)\"\u003eupdate\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e(\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e_id\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003ehost_id\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e    $\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003epush\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e      \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elogmsgs\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e        $\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eeach\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e[\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etime\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003enow\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003emessage\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003elog_message_here\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e]\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e        $\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003esort\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e{\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003etime\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e1\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e,\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// sort by time\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--string\" style=\"color:var(--sh-string)\"\u003e        $\u003c/span\u003e\u003cspan class=\"sh__token--identifier\" style=\"color:var(--sh-identifier)\"\u003eslice\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e:\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e-\u003c/span\u003e\u003cspan class=\"sh__token--class\" style=\"color:var(--sh-class)\"\u003e1000\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e \u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e         \u003c/span\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e// get top 1000\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--comment\" style=\"color:var(--sh-comment)\"\u003e\u003c/span\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e      \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e    \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"sh__line\"\u003e\u003cspan class=\"sh__token--space\" style=\"color:var(--sh-space)\"\u003e  \u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e}\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e)\u003c/span\u003e\u003cspan class=\"sh__token--sign\" style=\"color:var(--sh-sign)\"\u003e;\u003c/span\u003e\u003cspan class=\"sh__token--break\" style=\"color:var(--sh-break)\"\u003e\u003c/span\u003e\u003c/span\u003e"])</script><script>self.__next_f.push([1,"2f:[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$3c\"},\"className\":\"language-javascript\"}]}]\n30:[\"$\",\"h2\",null,{\"id\":\"6-rules-of-thumb\",\"children\":[[[\"$\",\"a\",\"link-6-rules-of-thumb\",{\"href\":\"#6-rules-of-thumb\",\"className\":\"anchor\"}]],\"6 Rules of Thumb\"]}]\n31:[\"$\",\"p\",null,{\"children\":\"Here are some \\\"rules of thumb\\\" to guide you through these innumerable (but not infinite) choices:\"}]\n"])</script><script>self.__next_f.push([1,"32:[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Favor embedding unless there is a compelling reason not to\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Needing to access an object on its own is a compelling reason not to embed it\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Arrays should not grow without bound. If there are more than a couple of hundred documents on the \\\"many\\\" side, don't embed them; if there are more than a few thousand documents on the \\\"many\\\" side, don't use an array of ObjectID references. High-cardinality arrays are a compelling reason not to embed.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Don't be afraid of application-level joins: if you index correctly and use the projection specifier then application-level joins are barely more expensive than server-side joins in a relational database.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Consider the write/read ratio when denormalizing. A field that will mostly be read and only seldom updated is a good candidate for denormalization: if you denormalize a field that is updated frequently then the extra work of finding and updating all the instances is likely to overwhelm the savings that you get from denormalizing.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"As always with MongoDB, how you model your data depends  entirely  on your particular application's data access patterns. You want to structure your data to match the ways that your application queries and updates it.\"}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"33:[\"$\",\"h2\",null,{\"id\":\"references\",\"children\":[[[\"$\",\"a\",\"link-references\",{\"href\":\"#references\",\"className\":\"anchor\"}]],\"References\"]}]\n"])</script><script>self.__next_f.push([1,"34:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-1\",\"children\":\"6 Rules of Thumb for MongoDB Schema Design Part 1\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-2\",\"children\":\"6 Rules of Thumb for MongoDB Schema Design Part 2\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-3\",\"children\":\"6 Rules of Thumb for MongoDB Schema Design Part 3\"}]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nb:null\n"])</script><script>self.__next_f.push([1,"3d:I[8404,[],\"IconMark\"]\n"])</script><script>self.__next_f.push([1,"d:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Keon Kim\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Keon's blog.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"manifest\",\"href\":\"/favicon/site.webmanifest\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"meta\",\"3\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"4\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:title\",\"content\":\"Keon Kim\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:description\",\"content\":\"Keon's blog.\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:url\",\"content\":\"https://portfolio-blog-starter.vercel.app\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:site_name\",\"content\":\"Keon Kim\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:title\",\"content\":\"Keon Kim\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:description\",\"content\":\"Keon's blog.\"}],[\"$\",\"link\",\"14\",{\"rel\":\"icon\",\"href\":\"/favicon/favicon-16x16.png\",\"sizes\":\"16x16\",\"type\":\"image/png\"}],[\"$\",\"link\",\"15\",{\"rel\":\"icon\",\"href\":\"/favicon/favicon-32x32.png\",\"sizes\":\"32x32\",\"type\":\"image/png\"}],[\"$\",\"link\",\"16\",{\"rel\":\"icon\",\"href\":\"/favicon/favicon.ico\",\"sizes\":\"any\"}],[\"$\",\"link\",\"17\",{\"rel\":\"apple-touch-icon\",\"href\":\"/favicon/apple-touch-icon.png\",\"sizes\":\"180x180\",\"type\":\"image/png\"}],[\"$\",\"link\",\"18\",{\"rel\":\"android-chrome-192x192\",\"href\":\"/favicon/android-chrome-192x192.png\"}],[\"$\",\"link\",\"19\",{\"rel\":\"android-chrome-512x512\",\"href\":\"/favicon/android-chrome-512x512.png\"}],[\"$\",\"$L3d\",\"20\",{}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"12:\"$d:metadata\"\n"])</script></body></html>